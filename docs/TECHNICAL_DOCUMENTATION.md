# üìö Documentaci√≥n T√©cnica - MUNDERO Hub

## üèóÔ∏è Arquitectura del Sistema

### Visi√≥n General

MUNDERO Hub es una aplicaci√≥n Single Page Application (SPA) construida con React y TypeScript que funciona como centro de identidad empresarial. La arquitectura est√° dise√±ada para ser escalable, mantenible y segura.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    MUNDERO Hub Frontend                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  React 18.3.1 + TypeScript 5.6.2 + Tailwind CSS          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ   Landing   ‚îÇ ‚îÇ  Dashboard  ‚îÇ ‚îÇ    Admin    ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ    Page     ‚îÇ ‚îÇ    Page     ‚îÇ ‚îÇ   Settings  ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                Firebase Authentication                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ   Google    ‚îÇ ‚îÇ    Roles    ‚îÇ ‚îÇ   Session   ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ   Sign-In   ‚îÇ ‚îÇ Management  ‚îÇ ‚îÇ Management  ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                External Integrations                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ   Legalty   ‚îÇ ‚îÇ     We      ‚îÇ ‚îÇ   Future    ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ ‚îÇ Consulting  ‚îÇ ‚îÇ    Apps     ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß Componentes Principales

### 1. Sistema de Autenticaci√≥n (`hooks/useAuth.ts`)

**Prop√≥sito**: Gestionar el estado de autenticaci√≥n del usuario usando Firebase Auth.

**Funcionalidades**:

- Login con Google OAuth 2.0
- Gesti√≥n de sesiones persistentes
- Manejo de roles de usuario (Super Admin, Admin, Usuario)
- Logout seguro con limpieza de estado

**Implementaci√≥n**:

```typescript
interface User {
  uid: string;
  email: string;
  displayName: string;
  photoURL: string;
  role: "super_admin" | "admin" | "user";
}

const useAuth = () => {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);

  // Implementaci√≥n de login, logout, y gesti√≥n de estado
};
```

### 2. Gesti√≥n de Logo Din√°mico (`hooks/useLogo.ts`)

**Prop√≥sito**: Permitir la personalizaci√≥n del logo desde el panel administrativo.

**Funcionalidades**:

- Carga de im√°genes (PNG, JPG, SVG)
- Validaci√≥n de formato y tama√±o (m√°x. 2MB)
- Persistencia en localStorage
- Fallback al logo por defecto

**Flujo de Datos**:

```
Upload Image ‚Üí Validate ‚Üí Convert to Base64 ‚Üí Store in localStorage ‚Üí Update UI
```

### 3. Panel de Administraci√≥n (`components/AdminSettings.tsx`)

**Prop√≥sito**: Interfaz de configuraci√≥n para Super Administradores.

**Secciones**:

#### 3.1 Gesti√≥n de Logo

- **Upload Component**: Drag & drop con validaci√≥n
- **Preview System**: Vista previa en tiempo real
- **Storage**: Persistencia en localStorage
- **Integration**: Actualizaci√≥n autom√°tica en toda la app

#### 3.2 Configuraci√≥n SEO

- **Meta Tags Editor**: T√≠tulo, descripci√≥n, keywords
- **Open Graph**: Facebook, LinkedIn optimization
- **Twitter Cards**: Twitter-specific metadata
- **Preview System**: Simulaci√≥n de Google Search y redes sociales

**Estructura de Datos SEO**:

```typescript
interface SEOConfig {
  title: string;
  description: string;
  keywords: string;
  ogTitle: string;
  ogDescription: string;
  ogImage: string;
  twitterTitle: string;
  twitterDescription: string;
  twitterImage: string;
}
```

### 4. Landing Page (`components/GoogleOnlyAuth.tsx`)

**Prop√≥sito**: P√°gina de entrada con autenticaci√≥n y branding.

**Caracter√≠sticas**:

- **Dise√±o Responsivo**: Mobile-first approach
- **Animaciones**: Framer Motion para micro-interacciones
- **Branding Din√°mico**: Logo personalizable desde admin
- **SEO Optimizado**: Meta tags y structured data

**Elementos Visuales**:

- Fondo con gradientes animados
- Efectos glassmorphism
- Patrones geom√©tricos de fondo
- Botones con hover effects

### 5. Dashboard Principal (`pages/Dashboard.tsx`)

**Prop√≥sito**: Centro de control post-autenticaci√≥n.

**Secciones**:

#### 5.1 Estad√≠sticas

- Usuarios totales registrados
- Aplicaciones integradas
- Sesiones activas
- M√©tricas de uso

#### 5.2 Aplicaciones Integradas

- **Legalty**: Sistema legal
- **We Consulting**: Consultor√≠a empresarial
- **Futuras integraciones**: Escalabilidad

#### 5.3 Gesti√≥n de Usuarios (Admin/Super Admin)

- Lista de usuarios registrados
- Cambio de roles
- Estado de usuarios (activo/inactivo)
- Filtros y b√∫squeda

## üîê Sistema de Seguridad

### Autenticaci√≥n Firebase

**Configuraci√≥n**:

```typescript
const firebaseConfig = {
  apiKey: process.env.VITE_FIREBASE_API_KEY,
  authDomain: process.env.VITE_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.VITE_FIREBASE_PROJECT_ID,
  // ... m√°s configuraci√≥n
};
```

**Flujo de Autenticaci√≥n**:

1. Usuario hace clic en "Iniciar Sesi√≥n con Google"
2. Redirecci√≥n a Google OAuth
3. Google retorna token de autorizaci√≥n
4. Firebase valida y crea sesi√≥n
5. Aplicaci√≥n recibe user object con roles
6. Redirecci√≥n al dashboard correspondiente

### Gesti√≥n de Roles

**Niveles de Acceso**:

- **Super Admin**: Acceso completo (configuraci√≥n, usuarios, aplicaciones)
- **Admin**: Gesti√≥n de usuarios y estad√≠sticas
- **Usuario**: Acceso a aplicaciones integradas

**Implementaci√≥n**:

```typescript
const checkPermission = (userRole: string, requiredRole: string) => {
  const roleHierarchy = {
    super_admin: 3,
    admin: 2,
    user: 1,
  };

  return roleHierarchy[userRole] >= roleHierarchy[requiredRole];
};
```

## üìä Gesti√≥n de Estado

### Estado Local (React Hooks)

**useAuth Hook**:

- Estado de usuario autenticado
- Loading states
- Error handling
- Persistencia de sesi√≥n

**useLogo Hook**:

- Logo personalizado
- Estado de carga
- Fallback management

### Persistencia de Datos

**localStorage**:

- Logo personalizado (Base64)
- Configuraci√≥n SEO
- Preferencias de usuario
- Tema de la aplicaci√≥n

**Estructura de Datos**:

```typescript
// localStorage keys
const STORAGE_KEYS = {
  CUSTOM_LOGO: "mundero_custom_logo",
  SEO_CONFIG: "mundero_seo_config",
  USER_PREFERENCES: "mundero_user_prefs",
  THEME: "mundero_theme",
};
```

## üé® Sistema de Estilos

### Tailwind CSS + Shadcn/ui

**Configuraci√≥n**:

```javascript
// tailwind.config.js
module.exports = {
  content: ["./src/**/*.{js,ts,jsx,tsx}"],
  theme: {
    extend: {
      colors: {
        mundero: {
          primary: "#3B82F6",
          secondary: "#1E40AF",
          accent: "#F59E0B",
          dark: "#1F2937",
          light: "#F9FAFB",
        },
      },
      animation: {
        "fade-in": "fadeIn 0.5s ease-in-out",
        "slide-up": "slideUp 0.3s ease-out",
        "pulse-slow": "pulse 3s infinite",
      },
    },
  },
};
```

### Componentes Reutilizables

**Button Component**:

```typescript
interface ButtonProps {
  variant: "primary" | "secondary" | "outline";
  size: "sm" | "md" | "lg";
  loading?: boolean;
  children: React.ReactNode;
}
```

**Card Component**:

```typescript
interface CardProps {
  title?: string;
  description?: string;
  children: React.ReactNode;
  className?: string;
}
```

## üöÄ Optimizaci√≥n de Performance

### Bundle Optimization

**Vite Configuration**:

```typescript
// vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ["react", "react-dom"],
          firebase: ["firebase/app", "firebase/auth"],
          ui: ["@radix-ui/react-dialog", "@radix-ui/react-dropdown-menu"],
        },
      },
    },
    chunkSizeWarningLimit: 1000,
  },
});
```

**Resultados**:

- Bundle principal: 635.25 kB
- Comprimido (gzip): 177.79 kB
- Chunks separados para mejor caching

### Lazy Loading

**Component Splitting**:

```typescript
const AdminSettings = lazy(() => import('./components/AdminSettings'));
const UserManagement = lazy(() => import('./components/UserManagement'));

// Uso con Suspense
<Suspense fallback={<LoadingSpinner />}>
  <AdminSettings />
</Suspense>
```

### Image Optimization

**Logo Management**:

- Compresi√≥n autom√°tica de im√°genes
- Formatos optimizados (WebP fallback)
- Lazy loading de im√°genes
- Placeholder mientras carga

## üì± Responsive Design

### Breakpoints

```css
/* Mobile First Approach */
.container {
  @apply px-4 mx-auto;
}

/* Tablet */
@media (min-width: 768px) {
  .container {
    @apply px-6 max-w-4xl;
  }
}

/* Desktop */
@media (min-width: 1024px) {
  .container {
    @apply px-8 max-w-6xl;
  }
}
```

### Mobile Optimization

**Touch Targets**:

- M√≠nimo 44px para elementos interactivos
- Espaciado adecuado entre botones
- Gestos t√°ctiles optimizados

**Performance Mobile**:

- Im√°genes responsive
- Fonts optimizadas
- Reducci√≥n de JavaScript no cr√≠tico

## üîç SEO y Metadata

### Meta Tags Din√°micos

**Implementaci√≥n**:

```typescript
const updateMetaTags = (seoConfig: SEOConfig) => {
  document.title = seoConfig.title;

  updateMetaTag("description", seoConfig.description);
  updateMetaTag("keywords", seoConfig.keywords);

  // Open Graph
  updateMetaTag("og:title", seoConfig.ogTitle);
  updateMetaTag("og:description", seoConfig.ogDescription);

  // Twitter Cards
  updateMetaTag("twitter:title", seoConfig.twitterTitle);
  updateMetaTag("twitter:description", seoConfig.twitterDescription);
};
```

### Structured Data

**Schema.org Implementation**:

```json
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "MUNDERO Hub",
  "description": "Hub de identidad empresarial",
  "url": "https://hub.mundero.net",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web Browser"
}
```

## üß™ Testing Strategy

### Unit Tests (Futuro)

**Componentes a Testear**:

- useAuth hook
- useLogo hook
- AdminSettings component
- Authentication flow

**Testing Framework**:

```bash
# Instalaci√≥n futura
pnpm add -D vitest @testing-library/react @testing-library/jest-dom
```

### E2E Tests (Futuro)

**Flujos Cr√≠ticos**:

- Login/Logout flow
- Admin panel functionality
- Logo upload process
- SEO configuration

## üöÄ Deployment Pipeline

### Vercel Deployment

**Configuraci√≥n**:

```json
{
  "version": 2,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build"
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ]
}
```

### Environment Variables

**Production Setup**:

```bash
# Vercel Dashboard
VITE_FIREBASE_API_KEY=production_key
VITE_FIREBASE_AUTH_DOMAIN=mundero-hub.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=mundero-hub-prod
# ... m√°s variables
```

### CI/CD Pipeline (Futuro)

**GitHub Actions**:

```yaml
name: Deploy to Production
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: pnpm install
      - run: pnpm build
      - run: pnpm test
      - uses: vercel/action@v1
```

## üìà Monitoring y Analytics

### Performance Monitoring

**M√©tricas Clave**:

- First Contentful Paint (FCP)
- Largest Contentful Paint (LCP)
- Cumulative Layout Shift (CLS)
- First Input Delay (FID)

### Error Tracking (Futuro)

**Sentry Integration**:

```typescript
import * as Sentry from "@sentry/react";

Sentry.init({
  dsn: process.env.VITE_SENTRY_DSN,
  environment: process.env.NODE_ENV,
});
```

## üîß Troubleshooting

### Problemas Comunes

#### 1. Firebase Authentication Errors

**Error**: "Firebase: Error (auth/unauthorized-domain)"
**Soluci√≥n**: Agregar dominio a Firebase Console > Authentication > Settings > Authorized domains

#### 2. Build Failures

**Error**: "Module not found" durante build
**Soluci√≥n**:

```bash
rm -rf node_modules .vite
pnpm install
pnpm build
```

#### 3. Logo Upload Issues

**Error**: Logo no se muestra despu√©s de upload
**Soluci√≥n**: Verificar formato de imagen y tama√±o m√°ximo (2MB)

#### 4. SEO Meta Tags No Actualizan

**Error**: Meta tags no se actualizan din√°micamente
**Soluci√≥n**: Verificar que el componente AdminSettings est√© guardando correctamente en localStorage

### Logs y Debugging

**Development Mode**:

```typescript
const DEBUG = process.env.NODE_ENV === "development";

const log = (message: string, data?: any) => {
  if (DEBUG) {
    console.log(`[MUNDERO Hub] ${message}`, data);
  }
};
```

## üìö Referencias y Recursos

### Documentaci√≥n Externa

- [React Documentation](https://react.dev/)
- [Firebase Auth Documentation](https://firebase.google.com/docs/auth)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Vite Documentation](https://vitejs.dev/)

### Herramientas de Desarrollo

- [Firebase Console](https://console.firebase.google.com/)
- [Vercel Dashboard](https://vercel.com/dashboard)
- [Tailwind CSS IntelliSense](https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss)

---

**√öltima actualizaci√≥n**: 28 de Octubre, 2024
**Versi√≥n del documento**: 2.1.0
**Mantenido por**: Equipo MUNDERO
